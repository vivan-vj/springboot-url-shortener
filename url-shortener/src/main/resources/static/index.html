<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>URL Shortener</title>
    <style>
        body {
          font-family: Arial, sans-serif;
          margin: 40px;
          background-color: #f4f4f4;
        }
        h2 {
          color: #333;
        }
        input[type="text"] {
          width: 400px;
          padding: 8px;
          margin-right: 10px;
        }
        button {
          padding: 8px 12px;
          cursor: pointer;
        }
        #result {
          margin-top: 20px;
          display: none;
        }
    </style>
</head>
<body>
<h2>ðŸ”— URL Shortener</h2>

<form id="shortenForm">
    <input type="text" id="longUrl" placeholder="Paste your long HTTPS URL here" required />
    <button type="submit">Shorten</button>
</form>

<div id="result">
    <label for="shortUrl">Short URL:</label>
    <input type="text" id="shortUrl" readonly />
    <button onclick="copyToClipboard()" title="Copy to clipboard">ðŸ“‹</button>
</div>
<script>
    document.getElementById("shortenForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const longUrl = document.getElementById("longUrl").value;

      fetch("/shorten", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: "longUrl=" + encodeURIComponent(longUrl)
      })
      .then(response => response.text())
      .then(shortUrl => {
        document.getElementById("shortUrl").value = shortUrl;
        document.getElementById("result").style.display = "block";
      })
      .catch(err => alert("Error: " + err));
    });

    function copyToClipboard() {
      const input = document.getElementById("shortUrl");
      input.select();
      input.setSelectionRange(0, 99999); // For mobile
      navigator.clipboard.writeText(input.value)
        .then(() => alert("Copied to clipboard!"))
        .catch(err => alert("Failed to copy: " + err));
    }
</script>
</body>
</html>